<div id="pf53" class="pf w0 h0" data-page-no="53"><div class="pc pc53 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg53.png"/><div class="c x0 y3c1 w1 h9"><div class="t m0 x1 h3 yd35 ff1 fs0 fc0 sc0 ls0 ws0"> </div><div class="t m0 x1 h3 yd36 ff1 fs0 fc0 sc0 ls0 ws0">RFC 2616                        HTTP/1.1                       June 1999</div><div class="t m0 x1 h3 yd37 ff1 fs0 fc0 sc0 ls0 ws0">   response is first-hand unless all caches along the request path are</div><div class="t m0 x1 h3 yd38 ff1 fs0 fc0 sc0 ls0 ws0">   compliant with HTTP/1.1 (i.e., older HTTP caches did not implement</div><div class="t m0 x1 h3 yd39 ff1 fs0 fc0 sc0 ls0 ws0">   the Age header field).</div><div class="t m0 x1 h6 yd3a ff2 fs0 fc0 sc0 ls0 ws0">13.2.4 Expiration Calculations</div><div class="t m0 x1 h3 yd3b ff1 fs0 fc0 sc0 ls0 ws0">   In order to decide whether a response is fresh or stale, we need to</div><div class="t m0 x1 h3 yd3c ff1 fs0 fc0 sc0 ls0 ws0">   compare its freshness lifetime to its age. The age is calculated as</div><div class="t m0 x1 h3 yd3d ff1 fs0 fc0 sc0 ls0 ws0">   described in section 13.2.3; this section describes how to calculate</div><div class="t m0 x1 h3 yd3e ff1 fs0 fc0 sc0 ls0 ws0">   the freshness lifetime, and to determine if a response has expired.</div><div class="t m0 x1 h3 yd3f ff1 fs0 fc0 sc0 ls0 ws0">   In the discussion below, the values can be represented in any form</div><div class="t m0 x1 h3 yd40 ff1 fs0 fc0 sc0 ls0 ws0">   appropriate for arithmetic operations.</div><div class="t m0 x1 h3 yd41 ff1 fs0 fc0 sc0 ls0 ws0">   We use the term &quot;expires_value&quot; to denote the value of the Expires</div><div class="t m0 x1 h3 yd42 ff1 fs0 fc0 sc0 ls0 ws0">   header. We use the term &quot;max_age_value&quot; to denote an appropriate</div><div class="t m0 x1 h3 yd43 ff1 fs0 fc0 sc0 ls0 ws0">   value of the number of seconds carried by the &quot;max-age&quot; directive of</div><div class="t m0 x1 h3 yd44 ff1 fs0 fc0 sc0 ls0 ws0">   the Cache-Control header in a response (see section 14.9.3).</div><div class="t m0 x1 h3 yd45 ff1 fs0 fc0 sc0 ls0 ws0">   The max-age directive takes priority over Expires, so if max-age is</div><div class="t m0 x1 h3 yd46 ff1 fs0 fc0 sc0 ls0 ws0">   present in a response, the calculation is simply:</div><div class="t m0 x1 h3 yd47 ff1 fs0 fc0 sc0 ls0 ws0">      freshness_lifetime = max_age_value</div><div class="t m0 x1 h3 yd48 ff1 fs0 fc0 sc0 ls0 ws0">   Otherwise, if Expires is present in the response, the calculation is:</div><div class="t m0 x1 h3 yd49 ff1 fs0 fc0 sc0 ls0 ws0">      freshness_lifetime = expires_value - date_value</div><div class="t m0 x1 h3 yd4a ff1 fs0 fc0 sc0 ls0 ws0">   Note that neither of these calculations is vulnerable to clock skew,</div><div class="t m0 x1 h3 yd4b ff1 fs0 fc0 sc0 ls0 ws0">   since all of the information comes from the origin server.</div><div class="t m0 x1 h3 yd4c ff1 fs0 fc0 sc0 ls0 ws0">   If none of Expires, Cache-Control: max-age, or Cache-Control: s-</div><div class="t m0 x1 h3 yd4d ff1 fs0 fc0 sc0 ls0 ws0">   maxage (see section 14.9.3) appears in the response, and the response</div><div class="t m0 x1 h3 yd4e ff1 fs0 fc0 sc0 ls0 ws0">   does not include other restrictions on caching, the cache MAY compute</div><div class="t m0 x1 h3 yd4f ff1 fs0 fc0 sc0 ls0 ws0">   a freshness lifetime using a heuristic. The cache MUST attach Warning</div><div class="t m0 x1 h3 yd50 ff1 fs0 fc0 sc0 ls0 ws0">   113 to any response whose age is more than 24 hours if such warning</div><div class="t m0 x1 h3 yd51 ff1 fs0 fc0 sc0 ls0 ws0">   has not already been added.</div><div class="t m0 x1 h3 yd52 ff1 fs0 fc0 sc0 ls0 ws0">   Also, if the response does have a Last-Modified time, the heuristic</div><div class="t m0 x1 h3 yd53 ff1 fs0 fc0 sc0 ls0 ws0">   expiration value SHOULD be no more than some fraction of the interval</div><div class="t m0 x1 h3 yd54 ff1 fs0 fc0 sc0 ls0 ws0">   since that time. A typical setting of this fraction might be 10%.</div><div class="t m0 x1 h3 yd55 ff1 fs0 fc0 sc0 ls0 ws0">   The calculation to determine if a response has expired is quite</div><div class="t m0 x1 h3 yd56 ff1 fs0 fc0 sc0 ls0 ws0">   simple:</div><div class="t m0 x1 h3 yd57 ff1 fs0 fc0 sc0 ls0 ws0">      response_is_fresh = (freshness_lifetime &gt; current_age)</div><div class="t m0 x1 h3 yd58 ff1 fs0 fc0 sc0 ls0 ws0">Fielding, et al.            Standards Track                    [Page 83]</div></div><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:801.984400px;width:5.606300px;height:11.214800px;background-color:rgba(255,255,255,0.000001);"></div><a class="l" href="https://tools.ietf.org/html/rfc2616"><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:789.171900px;width:44.849900px;height:11.210900px;background-color:rgba(255,255,255,0.000001);"></div></a><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:699.472700px;width:35.239300px;height:11.210900px;background-color:rgba(255,255,255,0.000001);"></div><div class="d m1" style="border-style:none;position:absolute;left:125.107000px;bottom:648.214800px;width:78.487300px;height:11.211000px;background-color:rgba(255,255,255,0.000001);"></div><div class="d m1" style="border-style:none;position:absolute;left:298.900500px;bottom:545.699200px;width:78.487300px;height:11.211000px;background-color:rgba(255,255,255,0.000001);"></div><div class="d m1" style="border-style:none;position:absolute;left:119.500700px;bottom:353.484400px;width:78.487400px;height:11.214800px;background-color:rgba(255,255,255,0.000001);"></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
