<div id="pf5e" class="pf w0 h0" data-page-no="5e"><div class="pc pc5e w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg5e.png"/><div class="c x0 y3c1 w1 h9"><div class="t m0 x1 h3 yee5 ff1 fs0 fc0 sc0 ls0 ws0"> </div><div class="t m0 x1 h3 yee6 ff1 fs0 fc0 sc0 ls0 ws0">RFC 2616                        HTTP/1.1                       June 1999</div><div class="t m0 x1 h6 yee7 ff2 fs0 fc0 sc0 ls0 ws0">13.5.3 Combining Headers</div><div class="t m0 x1 h3 yee8 ff1 fs0 fc0 sc0 ls0 ws0">   When a cache makes a validating request to a server, and the server</div><div class="t m0 x1 h3 yee9 ff1 fs0 fc0 sc0 ls0 ws0">   provides a 304 (Not Modified) response or a 206 (Partial Content)</div><div class="t m0 x1 h3 yeea ff1 fs0 fc0 sc0 ls0 ws0">   response, the cache then constructs a response to send to the</div><div class="t m0 x1 h3 yeeb ff1 fs0 fc0 sc0 ls0 ws0">   requesting client.</div><div class="t m0 x1 h3 yeec ff1 fs0 fc0 sc0 ls0 ws0">   If the status code is 304 (Not Modified), the cache uses the entity-</div><div class="t m0 x1 h3 yeed ff1 fs0 fc0 sc0 ls0 ws0">   body stored in the cache entry as the entity-body of this outgoing</div><div class="t m0 x1 h3 yeee ff1 fs0 fc0 sc0 ls0 ws0">   response. If the status code is 206 (Partial Content) and the ETag or</div><div class="t m0 x1 h3 yeef ff1 fs0 fc0 sc0 ls0 ws0">   Last-Modified headers match exactly, the cache MAY combine the</div><div class="t m0 x1 h3 yef0 ff1 fs0 fc0 sc0 ls0 ws0">   contents stored in the cache entry with the new contents received in</div><div class="t m0 x1 h3 yef1 ff1 fs0 fc0 sc0 ls0 ws0">   the response and use the result as the entity-body of this outgoing</div><div class="t m0 x1 h3 yef2 ff1 fs0 fc0 sc0 ls0 ws0">   response, (see 13.5.4).</div><div class="t m0 x1 h3 yef3 ff1 fs0 fc0 sc0 ls0 ws0">   The end-to-end headers stored in the cache entry are used for the</div><div class="t m0 x1 h3 yef4 ff1 fs0 fc0 sc0 ls0 ws0">   constructed response, except that</div><div class="t m0 x1 h3 yef5 ff1 fs0 fc0 sc0 ls0 ws0">      - any stored Warning headers with warn-code 1xx (see section</div><div class="t m0 x1 h3 yef6 ff1 fs0 fc0 sc0 ls0 ws0">        14.46) MUST be deleted from the cache entry and the forwarded</div><div class="t m0 x1 h3 yef7 ff1 fs0 fc0 sc0 ls0 ws0">        response.</div><div class="t m0 x1 h3 yef8 ff1 fs0 fc0 sc0 ls0 ws0">      - any stored Warning headers with warn-code 2xx MUST be retained</div><div class="t m0 x1 h3 yef9 ff1 fs0 fc0 sc0 ls0 ws0">        in the cache entry and the forwarded response.</div><div class="t m0 x1 h3 yefa ff1 fs0 fc0 sc0 ls0 ws0">      - any end-to-end headers provided in the 304 or 206 response MUST</div><div class="t m0 x1 h3 yefb ff1 fs0 fc0 sc0 ls0 ws0">        replace the corresponding headers from the cache entry.</div><div class="t m0 x1 h3 yefc ff1 fs0 fc0 sc0 ls0 ws0">   Unless the cache decides to remove the cache entry, it MUST also</div><div class="t m0 x1 h3 yefd ff1 fs0 fc0 sc0 ls0 ws0">   replace the end-to-end headers stored with the cache entry with</div><div class="t m0 x1 h3 yefe ff1 fs0 fc0 sc0 ls0 ws0">   corresponding headers received in the incoming response, except for</div><div class="t m0 x1 h3 yeff ff1 fs0 fc0 sc0 ls0 ws0">   Warning headers as described immediately above. If a header field-</div><div class="t m0 x1 h3 yf00 ff1 fs0 fc0 sc0 ls0 ws0">   name in the incoming response matches more than one header in the</div><div class="t m0 x1 h3 yf01 ff1 fs0 fc0 sc0 ls0 ws0">   cache entry, all such old headers MUST be replaced.</div><div class="t m0 x1 h3 yf02 ff1 fs0 fc0 sc0 ls0 ws0">   In other words, the set of end-to-end headers received in the</div><div class="t m0 x1 h3 yf03 ff1 fs0 fc0 sc0 ls0 ws0">   incoming response overrides all corresponding end-to-end headers</div><div class="t m0 x1 h3 yf04 ff1 fs0 fc0 sc0 ls0 ws0">   stored with the cache entry (except for stored Warning headers with</div><div class="t m0 x1 h3 yf05 ff1 fs0 fc0 sc0 ls0 ws0">   warn-code 1xx, which are deleted even if not overridden).</div><div class="t m0 x1 h3 yf06 ff1 fs0 fc0 sc0 ls0 ws0">      Note: this rule allows an origin server to use a 304 (Not</div><div class="t m0 x1 h3 yf07 ff1 fs0 fc0 sc0 ls0 ws0">      Modified) or a 206 (Partial Content) response to update any header</div><div class="t m0 x1 h3 yf08 ff1 fs0 fc0 sc0 ls0 ws0">      associated with a previous response for the same entity or sub-</div><div class="t m0 x1 h3 yf09 ff1 fs0 fc0 sc0 ls0 ws0">      ranges thereof, although it might not always be meaningful or</div><div class="t m0 x1 h3 yf0a ff1 fs0 fc0 sc0 ls0 ws0">      correct to do so. This rule does not allow an origin server to use</div><div class="t m0 x1 h3 yf0b ff1 fs0 fc0 sc0 ls0 ws0">      a 304 (Not Modified) or a 206 (Partial Content) response to</div><div class="t m0 x1 h3 yf0c ff1 fs0 fc0 sc0 ls0 ws0">      entirely delete a header that it had provided with a previous</div><div class="t m0 x1 h3 yf0d ff1 fs0 fc0 sc0 ls0 ws0">      response.</div><div class="t m0 x1 h3 yf0e ff1 fs0 fc0 sc0 ls0 ws0">Fielding, et al.            Standards Track                    [Page 94]</div></div><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:801.984400px;width:5.606300px;height:11.210900px;background-color:rgba(255,255,255,0.000001);"></div><a class="l" href="https://tools.ietf.org/html/rfc2616"><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:789.171900px;width:44.849900px;height:11.210900px;background-color:rgba(255,255,255,0.000001);"></div></a><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:750.726600px;width:35.239300px;height:11.210900px;background-color:rgba(255,255,255,0.000001);"></div><div class="d m1" style="border-style:none;position:absolute;left:366.175300px;bottom:520.070300px;width:39.243700px;height:11.211000px;background-color:rgba(255,255,255,0.000001);"></div><div class="d m1" style="border-style:none;position:absolute;left:80.257000px;bottom:507.257800px;width:28.031300px;height:11.211000px;background-color:rgba(255,255,255,0.000001);"></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
