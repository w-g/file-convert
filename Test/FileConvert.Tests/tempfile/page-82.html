<div id="pf52" class="pf w0 h0" data-page-no="52"><div class="pc pc52 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg52.png"/><div class="c x0 y71e w1 ha"><div class="t m0 x1 h3 yd0b ff1 fs0 fc0 sc0 ls0 ws0"> </div><div class="t m0 x1 h3 yd0c ff1 fs0 fc0 sc0 ls0 ws0">RFC 2616                        HTTP/1.1                       June 1999</div><div class="t m0 x1 h3 yd0d ff1 fs0 fc0 sc0 ls0 ws0">   the time that the response was received. This algorithm results in</div><div class="t m0 x1 h3 yd0e ff1 fs0 fc0 sc0 ls0 ws0">   conservative behavior no matter how much delay is experienced. So, we</div><div class="t m0 x1 h3 yd0f ff1 fs0 fc0 sc0 ls0 ws0">   compute:</div><div class="t m0 x1 h3 yd10 ff1 fs0 fc0 sc0 ls0 ws0">      corrected_initial_age = corrected_received_age</div><div class="t m0 x1 h3 yd11 ff1 fs0 fc0 sc0 ls0 ws0">                            + (now - request_time)</div><div class="t m0 x1 h3 yd12 ff1 fs0 fc0 sc0 ls0 ws0">   where &quot;request_time&quot; is the time (according to the local clock) when</div><div class="t m0 x1 h3 yd13 ff1 fs0 fc0 sc0 ls0 ws0">   the request that elicited this response was sent.</div><div class="t m0 x1 h3 yd14 ff1 fs0 fc0 sc0 ls0 ws0">   Summary of age calculation algorithm, when a cache receives a</div><div class="t m0 x1 h3 yd15 ff1 fs0 fc0 sc0 ls0 ws0">   response:</div><div class="t m0 x1 h3 yd16 ff1 fs0 fc0 sc0 ls0 ws0">      /*</div><div class="t m0 x1 h3 yd17 ff1 fs0 fc0 sc0 ls0 ws0">       * age_value</div><div class="t m0 x1 h3 yd18 ff1 fs0 fc0 sc0 ls0 ws0">       *      is the value of Age: header received by the cache with</div><div class="t m0 x1 h3 yd19 ff1 fs0 fc0 sc0 ls0 ws0">       *              this response.</div><div class="t m0 x1 h3 yd1a ff1 fs0 fc0 sc0 ls0 ws0">       * date_value</div><div class="t m0 x1 h3 yd1b ff1 fs0 fc0 sc0 ls0 ws0">       *      is the value of the origin server&apos;s Date: header</div><div class="t m0 x1 h3 yd1c ff1 fs0 fc0 sc0 ls0 ws0">       * request_time</div><div class="t m0 x1 h3 yd1d ff1 fs0 fc0 sc0 ls0 ws0">       *      is the (local) time when the cache made the request</div><div class="t m0 x1 h3 yd1e ff1 fs0 fc0 sc0 ls0 ws0">       *              that resulted in this cached response</div><div class="t m0 x1 h3 yd1f ff1 fs0 fc0 sc0 ls0 ws0">       * response_time</div><div class="t m0 x1 h3 yd20 ff1 fs0 fc0 sc0 ls0 ws0">       *      is the (local) time when the cache received the</div><div class="t m0 x1 h3 yd21 ff1 fs0 fc0 sc0 ls0 ws0">       *              response</div><div class="t m0 x1 h3 yd22 ff1 fs0 fc0 sc0 ls0 ws0">       * now</div><div class="t m0 x1 h3 yd23 ff1 fs0 fc0 sc0 ls0 ws0">       *      is the current (local) time</div><div class="t m0 x1 h3 yd24 ff1 fs0 fc0 sc0 ls0 ws0">       */</div><div class="t m0 x1 h3 yd25 ff1 fs0 fc0 sc0 ls0 ws0">      apparent_age = max(0, response_time - date_value);</div><div class="t m0 x1 h3 yd26 ff1 fs0 fc0 sc0 ls0 ws0">      corrected_received_age = max(apparent_age, age_value);</div><div class="t m0 x1 h3 yd27 ff1 fs0 fc0 sc0 ls0 ws0">      response_delay = response_time - request_time;</div><div class="t m0 x1 h3 yd28 ff1 fs0 fc0 sc0 ls0 ws0">      corrected_initial_age = corrected_received_age + response_delay;</div><div class="t m0 x1 h3 yd29 ff1 fs0 fc0 sc0 ls0 ws0">      resident_time = now - response_time;</div><div class="t m0 x1 h3 yd2a ff1 fs0 fc0 sc0 ls0 ws0">      current_age   = corrected_initial_age + resident_time;</div><div class="t m0 x1 h3 yd2b ff1 fs0 fc0 sc0 ls0 ws0">   The current_age of a cache entry is calculated by adding the amount</div><div class="t m0 x1 h3 yd2c ff1 fs0 fc0 sc0 ls0 ws0">   of time (in seconds) since the cache entry was last validated by the</div><div class="t m0 x1 h3 yd2d ff1 fs0 fc0 sc0 ls0 ws0">   origin server to the corrected_initial_age. When a response is</div><div class="t m0 x1 h3 yd2e ff1 fs0 fc0 sc0 ls0 ws0">   generated from a cache entry, the cache MUST include a single Age</div><div class="t m0 x1 h3 yd2f ff1 fs0 fc0 sc0 ls0 ws0">   header field in the response with a value equal to the cache entry&apos;s</div><div class="t m0 x1 h3 yd30 ff1 fs0 fc0 sc0 ls0 ws0">   current_age.</div><div class="t m0 x1 h3 yd31 ff1 fs0 fc0 sc0 ls0 ws0">   The presence of an Age header field in a response implies that a</div><div class="t m0 x1 h3 yd32 ff1 fs0 fc0 sc0 ls0 ws0">   response is not first-hand. However, the converse is not true, since</div><div class="t m0 x1 h3 yd33 ff1 fs0 fc0 sc0 ls0 ws0">   the lack of an Age header field in a response does not imply that the</div><div class="t m0 x1 h3 yd34 ff1 fs0 fc0 sc0 ls0 ws0">Fielding, et al.            Standards Track                    [Page 82]</div></div><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:801.988300px;width:5.606300px;height:11.210900px;background-color:rgba(255,255,255,0.000001);"></div><a class="l" href="https://tools.ietf.org/html/rfc2616"><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:789.171900px;width:44.849900px;height:11.214800px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
