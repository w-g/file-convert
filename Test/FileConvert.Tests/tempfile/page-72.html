<div id="pf48" class="pf w0 h0" data-page-no="48"><div class="pc pc48 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg48.png"/><div class="c x0 y3c1 w1 h9"><div class="t m0 x1 h3 yb76 ff1 fs0 fc0 sc0 ls0 ws0"> </div><div class="t m0 x1 h3 yb77 ff1 fs0 fc0 sc0 ls0 ws0">RFC 2616                        HTTP/1.1                       June 1999</div><div class="t m0 x1 h3 yb78 ff1 fs0 fc0 sc0 ls0 ws0">   Any response containing an entity-body MAY be subject to negotiation,</div><div class="t m0 x1 h3 yb79 ff1 fs0 fc0 sc0 ls0 ws0">   including error responses.</div><div class="t m0 x1 h3 yb7a ff1 fs0 fc0 sc0 ls0 ws0">   There are two kinds of content negotiation which are possible in</div><div class="t m0 x1 h3 yb7b ff1 fs0 fc0 sc0 ls0 ws0">   HTTP: server-driven and agent-driven negotiation. These two kinds of</div><div class="t m0 x1 h3 yb7c ff1 fs0 fc0 sc0 ls0 ws0">   negotiation are orthogonal and thus may be used separately or in</div><div class="t m0 x1 h3 yb7d ff1 fs0 fc0 sc0 ls0 ws0">   combination. One method of combination, referred to as transparent</div><div class="t m0 x1 h3 yb7e ff1 fs0 fc0 sc0 ls0 ws0">   negotiation, occurs when a cache uses the agent-driven negotiation</div><div class="t m0 x1 h3 yb7f ff1 fs0 fc0 sc0 ls0 ws0">   information provided by the origin server in order to provide</div><div class="t m0 x1 h3 yb80 ff1 fs0 fc0 sc0 ls0 ws0">   server-driven negotiation for subsequent requests.</div><div class="t m0 x1 h6 yb81 ff2 fs0 fc0 sc0 ls0 ws0">12.1 Server-driven Negotiation</div><div class="t m0 x1 h3 yb82 ff1 fs0 fc0 sc0 ls0 ws0">   If the selection of the best representation for a response is made by</div><div class="t m0 x1 h3 yb83 ff1 fs0 fc0 sc0 ls0 ws0">   an algorithm located at the server, it is called server-driven</div><div class="t m0 x1 h3 yb84 ff1 fs0 fc0 sc0 ls0 ws0">   negotiation. Selection is based on the available representations of</div><div class="t m0 x1 h3 yb85 ff1 fs0 fc0 sc0 ls0 ws0">   the response (the dimensions over which it can vary; e.g. language,</div><div class="t m0 x1 h3 yb86 ff1 fs0 fc0 sc0 ls0 ws0">   content-coding, etc.) and the contents of particular header fields in</div><div class="t m0 x1 h3 yb87 ff1 fs0 fc0 sc0 ls0 ws0">   the request message or on other information pertaining to the request</div><div class="t m0 x1 h3 yb88 ff1 fs0 fc0 sc0 ls0 ws0">   (such as the network address of the client).</div><div class="t m0 x1 h3 yb89 ff1 fs0 fc0 sc0 ls0 ws0">   Server-driven negotiation is advantageous when the algorithm for</div><div class="t m0 x1 h3 yb8a ff1 fs0 fc0 sc0 ls0 ws0">   selecting from among the available representations is difficult to</div><div class="t m0 x1 h3 yb8b ff1 fs0 fc0 sc0 ls0 ws0">   describe to the user agent, or when the server desires to send its</div><div class="t m0 x1 h3 yb8c ff1 fs0 fc0 sc0 ls0 ws0">   &quot;best guess&quot; to the client along with the first response (hoping to</div><div class="t m0 x1 h3 yb8d ff1 fs0 fc0 sc0 ls0 ws0">   avoid the round-trip delay of a subsequent request if the &quot;best</div><div class="t m0 x1 h3 yb8e ff1 fs0 fc0 sc0 ls0 ws0">   guess&quot; is good enough for the user). In order to improve the server&apos;s</div><div class="t m0 x1 h3 yb8f ff1 fs0 fc0 sc0 ls0 ws0">   guess, the user agent MAY include request header fields (Accept,</div><div class="t m0 x1 h3 yb90 ff1 fs0 fc0 sc0 ls0 ws0">   Accept-Language, Accept-Encoding, etc.) which describe its</div><div class="t m0 x1 h3 yb91 ff1 fs0 fc0 sc0 ls0 ws0">   preferences for such a response.</div><div class="t m0 x1 h3 yb92 ff1 fs0 fc0 sc0 ls0 ws0">   Server-driven negotiation has disadvantages:</div><div class="t m0 x1 h3 yb93 ff1 fs0 fc0 sc0 ls0 ws0">      1. It is impossible for the server to accurately determine what</div><div class="t m0 x1 h3 yb94 ff1 fs0 fc0 sc0 ls0 ws0">         might be &quot;best&quot; for any given user, since that would require</div><div class="t m0 x1 h3 yb95 ff1 fs0 fc0 sc0 ls0 ws0">         complete knowledge of both the capabilities of the user agent</div><div class="t m0 x1 h3 yb96 ff1 fs0 fc0 sc0 ls0 ws0">         and the intended use for the response (e.g., does the user want</div><div class="t m0 x1 h3 yb97 ff1 fs0 fc0 sc0 ls0 ws0">         to view it on screen or print it on paper?).</div><div class="t m0 x1 h3 yb98 ff1 fs0 fc0 sc0 ls0 ws0">      2. Having the user agent describe its capabilities in every</div><div class="t m0 x1 h3 yb99 ff1 fs0 fc0 sc0 ls0 ws0">         request can be both very inefficient (given that only a small</div><div class="t m0 x1 h3 yb9a ff1 fs0 fc0 sc0 ls0 ws0">         percentage of responses have multiple representations) and a</div><div class="t m0 x1 h3 yb9b ff1 fs0 fc0 sc0 ls0 ws0">         potential violation of the user&apos;s privacy.</div><div class="t m0 x1 h3 yb9c ff1 fs0 fc0 sc0 ls0 ws0">      3. It complicates the implementation of an origin server and the</div><div class="t m0 x1 h3 yb9d ff1 fs0 fc0 sc0 ls0 ws0">         algorithms for generating responses to a request.</div><div class="t m0 x1 h3 yb9e ff1 fs0 fc0 sc0 ls0 ws0">Fielding, et al.            Standards Track                    [Page 72]</div></div><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:801.984400px;width:5.606300px;height:11.214800px;background-color:rgba(255,255,255,0.000001);"></div><a class="l" href="https://tools.ietf.org/html/rfc2616"><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:789.171900px;width:44.849900px;height:11.210900px;background-color:rgba(255,255,255,0.000001);"></div></a><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:609.773400px;width:23.225900px;height:11.211000px;background-color:rgba(255,255,255,0.000001);"></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
