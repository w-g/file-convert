<div id="pf32" class="pf w0 h0" data-page-no="32"><div class="pc pc32 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg32.png"/><div class="c x0 y71e w1 ha"><div class="t m0 x1 h3 y80f ff1 fs0 fc0 sc0 ls0 ws0"> </div><div class="t m0 x1 h3 y810 ff1 fs0 fc0 sc0 ls0 ws0">RFC 2616                        HTTP/1.1                       June 1999</div><div class="t m0 x1 h3 y811 ff1 fs0 fc0 sc0 ls0 ws0">      - If the proxy knows that the version of the next-hop server is</div><div class="t m0 x1 h3 y812 ff1 fs0 fc0 sc0 ls0 ws0">        HTTP/1.0 or lower, it MUST NOT forward the request, and it MUST</div><div class="t m0 x1 h3 y813 ff1 fs0 fc0 sc0 ls0 ws0">        respond with a 417 (Expectation Failed) status.</div><div class="t m0 x1 h3 y814 ff1 fs0 fc0 sc0 ls0 ws0">      - Proxies SHOULD maintain a cache recording the HTTP version</div><div class="t m0 x1 h3 y815 ff1 fs0 fc0 sc0 ls0 ws0">        numbers received from recently-referenced next-hop servers.</div><div class="t m0 x1 h3 y816 ff1 fs0 fc0 sc0 ls0 ws0">      - A proxy MUST NOT forward a 100 (Continue) response if the</div><div class="t m0 x1 h3 y817 ff1 fs0 fc0 sc0 ls0 ws0">        request message was received from an HTTP/1.0 (or earlier)</div><div class="t m0 x1 h3 y818 ff1 fs0 fc0 sc0 ls0 ws0">        client and did not include an Expect request-header field with</div><div class="t m0 x1 h3 y819 ff1 fs0 fc0 sc0 ls0 ws0">        the &quot;100-continue&quot; expectation. This requirement overrides the</div><div class="t m0 x1 h3 y81a ff1 fs0 fc0 sc0 ls0 ws0">        general rule for forwarding of 1xx responses (see section 10.1).</div><div class="t m0 x1 h6 y81b ff2 fs0 fc0 sc0 ls0 ws0">8.2.4 Client Behavior if Server Prematurely Closes Connection</div><div class="t m0 x1 h3 y81c ff1 fs0 fc0 sc0 ls0 ws0">   If an HTTP/1.1 client sends a request which includes a request body,</div><div class="t m0 x1 h3 y81d ff1 fs0 fc0 sc0 ls0 ws0">   but which does not include an Expect request-header field with the</div><div class="t m0 x1 h3 y81e ff1 fs0 fc0 sc0 ls0 ws0">   &quot;100-continue&quot; expectation, and if the client is not directly</div><div class="t m0 x1 h3 y81f ff1 fs0 fc0 sc0 ls0 ws0">   connected to an HTTP/1.1 origin server, and if the client sees the</div><div class="t m0 x1 h3 y820 ff1 fs0 fc0 sc0 ls0 ws0">   connection close before receiving any status from the server, the</div><div class="t m0 x1 h3 y821 ff1 fs0 fc0 sc0 ls0 ws0">   client SHOULD retry the request.  If the client does retry this</div><div class="t m0 x1 h3 y822 ff1 fs0 fc0 sc0 ls0 ws0">   request, it MAY use the following &quot;binary exponential backoff&quot;</div><div class="t m0 x1 h3 y823 ff1 fs0 fc0 sc0 ls0 ws0">   algorithm to be assured of obtaining a reliable response:</div><div class="t m0 x1 h3 y824 ff1 fs0 fc0 sc0 ls0 ws0">      1. Initiate a new connection to the server</div><div class="t m0 x1 h3 y825 ff1 fs0 fc0 sc0 ls0 ws0">      2. Transmit the request-headers</div><div class="t m0 x1 h3 y826 ff1 fs0 fc0 sc0 ls0 ws0">      3. Initialize a variable R to the estimated round-trip time to the</div><div class="t m0 x1 h3 y827 ff1 fs0 fc0 sc0 ls0 ws0">         server (e.g., based on the time it took to establish the</div><div class="t m0 x1 h3 y828 ff1 fs0 fc0 sc0 ls0 ws0">         connection), or to a constant value of 5 seconds if the round-</div><div class="t m0 x1 h3 y829 ff1 fs0 fc0 sc0 ls0 ws0">         trip time is not available.</div><div class="t m0 x1 h3 y82a ff1 fs0 fc0 sc0 ls0 ws0">      4. Compute T = R * (2**N), where N is the number of previous</div><div class="t m0 x1 h3 y82b ff1 fs0 fc0 sc0 ls0 ws0">         retries of this request.</div><div class="t m0 x1 h3 y82c ff1 fs0 fc0 sc0 ls0 ws0">      5. Wait either for an error response from the server, or for T</div><div class="t m0 x1 h3 y82d ff1 fs0 fc0 sc0 ls0 ws0">         seconds (whichever comes first)</div><div class="t m0 x1 h3 y82e ff1 fs0 fc0 sc0 ls0 ws0">      6. If no error response is received, after T seconds transmit the</div><div class="t m0 x1 h3 y82f ff1 fs0 fc0 sc0 ls0 ws0">         body of the request.</div><div class="t m0 x1 h3 y830 ff1 fs0 fc0 sc0 ls0 ws0">      7. If client sees that the connection is closed prematurely,</div><div class="t m0 x1 h3 y831 ff1 fs0 fc0 sc0 ls0 ws0">         repeat from step 1 until the request is accepted, an error</div><div class="t m0 x1 h3 y832 ff1 fs0 fc0 sc0 ls0 ws0">         response is received, or the user becomes impatient and</div><div class="t m0 x1 h3 y833 ff1 fs0 fc0 sc0 ls0 ws0">         terminates the retry process.</div><div class="t m0 x1 h3 y834 ff1 fs0 fc0 sc0 ls0 ws0">Fielding, et al.            Standards Track                    [Page 50]</div></div><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:801.988300px;width:5.606300px;height:11.210900px;background-color:rgba(255,255,255,0.000001);"></div><a class="l" href="https://tools.ietf.org/html/rfc2616"><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:789.175800px;width:44.849900px;height:11.210900px;background-color:rgba(255,255,255,0.000001);"></div></a><div class="d m1" style="border-style:none;position:absolute;left:360.569100px;bottom:609.773400px;width:67.274900px;height:11.214900px;background-color:rgba(255,255,255,0.000001);"></div><div class="d m1" style="border-style:none;position:absolute;left:35.407100px;bottom:584.144500px;width:28.832100px;height:11.214900px;background-color:rgba(255,255,255,0.000001);"></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
